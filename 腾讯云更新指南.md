# ğŸš€ è…¾è®¯äº‘æœåŠ¡å™¨æ›´æ–°æŒ‡å—

## å¿«é€Ÿæ›´æ–°ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Git Pullï¼ˆå¦‚æœä½¿ç”¨ Gitï¼‰

```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh user@your-server-ip

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/polybot

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æ£€æŸ¥æ›´æ–°åçš„æ–‡ä»¶
ls -la src/ProfitTracker.js
ls -la src/WalletFollower.js

# éªŒè¯è¯­æ³•
node --check src/ProfitTracker.js
node --check src/WalletFollower.js
node --check config.js

# é‡å¯æœåŠ¡
pm2 restart polybot  # å¦‚æœä½¿ç”¨ PM2
# æˆ–
npm start
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨è‡ªåŠ¨æ›´æ–°è„šæœ¬ï¼ˆå¦‚æœå·²è®¾ç½®ï¼‰

å¦‚æœä¹‹å‰è®¾ç½®äº†è‡ªåŠ¨æ›´æ–°ï¼ˆä½¿ç”¨ `setup-auto-update.sh`ï¼‰ï¼Œä»£ç ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

æ‰‹åŠ¨è§¦å‘æ›´æ–°ï¼š

```bash
cd /opt/polybot
bash auto-update.sh
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶

å¦‚æœéœ€è¦æ‰‹åŠ¨ä¸Šä¼ ï¼š

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
scp src/ProfitTracker.js user@your-server-ip:/opt/polybot/src/
scp src/WalletFollower.js user@your-server-ip:/opt/polybot/src/
scp config.js user@your-server-ip:/opt/polybot/
scp index.js user@your-server-ip:/opt/polybot/
```

ç„¶ååœ¨æœåŠ¡å™¨ä¸Šï¼š

```bash
cd /opt/polybot
node --check src/ProfitTracker.js
pm2 restart polybot
```

## æœ¬æ¬¡æ›´æ–°å†…å®¹

### 1. ç›ˆåˆ©ç»Ÿè®¡åŠŸèƒ½
- âœ… æ–°å¢ `src/ProfitTracker.js` - ç›ˆåˆ©ç»Ÿè®¡æ ¸å¿ƒç±»
- âœ… æ›´æ–° `src/WalletFollower.js` - é›†æˆç›ˆåˆ©ç»Ÿè®¡
- âœ… æ›´æ–° `config.js` - æ·»åŠ  `profitTracking` é…ç½®

### 2. é”™è¯¯å¤„ç†æ”¹è¿›
- âœ… æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- âœ… æ™ºèƒ½é”™è¯¯è¯Šæ–­å’Œå»ºè®®
- âœ… å¤±è´¥äº¤æ˜“è®°å½•å’Œç»Ÿè®¡

### 3. é…ç½®ä¼˜åŒ–
- âœ… `orderType`: æ”¹ä¸º `'FAK'`ï¼ˆæé«˜æˆåŠŸç‡ï¼‰
- âœ… `maxSlippage`: è°ƒæ•´ä¸º `0.05`ï¼ˆ5%ï¼‰

### 4. è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
- âœ… æ–°å¢ `auto-update.sh` - è‡ªåŠ¨æ›´æ–°è„šæœ¬
- âœ… æ–°å¢ `setup-auto-update.sh` - è®¾ç½®è„šæœ¬

## æ›´æ–°åéªŒè¯

### æ£€æŸ¥æ–‡ä»¶

```bash
cd /opt/polybot

# æ£€æŸ¥æ–°æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la src/ProfitTracker.js
ls -la src/WalletFollower.js

# æ£€æŸ¥é…ç½®
grep -A 5 "profitTracking" config.js
grep "orderType" config.js
grep "maxSlippage" config.js
```

### éªŒè¯è¯­æ³•

```bash
# æ£€æŸ¥è¯­æ³•é”™è¯¯
node --check src/ProfitTracker.js && echo "âœ… ProfitTracker.js OK"
node --check src/WalletFollower.js && echo "âœ… WalletFollower.js OK"
node --check config.js && echo "âœ… config.js OK"
```

### æµ‹è¯•è¿è¡Œ

```bash
# æµ‹è¯•è¿è¡Œï¼ˆ5ç§’ååœæ­¢ï¼‰
timeout 5 node index.js 2>&1 | head -50

# åº”è¯¥çœ‹åˆ°ï¼š
# âœ… ç›ˆåˆ©ç»Ÿè®¡å·²å¯ç”¨
# âœ… é…ç½®æ£€æŸ¥æ­£å¸¸
```

## é…ç½®æ£€æŸ¥æ¸…å•

æ›´æ–°åï¼Œç¡®ä¿ä»¥ä¸‹é…ç½®æ­£ç¡®ï¼š

```javascript
// config.js åº”è¯¥åŒ…å«ï¼š

followSettings: {
  orderType: 'FAK',      // âœ… åº”è¯¥æ˜¯ 'FAK'
  maxSlippage: 0.05,     // âœ… åº”è¯¥æ˜¯ 0.05 (5%)
  // ...
}

profitTracking: {
  enabled: true,         // âœ… åº”è¯¥å¯ç”¨
  autoSaveInterval: 60000,
  displayInterval: 30,
}
```

## é‡å¯æœåŠ¡

### å¦‚æœä½¿ç”¨ PM2

```bash
# åœæ­¢æœåŠ¡
pm2 stop polybot

# é‡å¯æœåŠ¡ï¼ˆåŠ è½½æ–°ä»£ç ï¼‰
pm2 restart polybot

# æŸ¥çœ‹æ—¥å¿—
pm2 logs polybot --lines 50

# æ£€æŸ¥çŠ¶æ€
pm2 status
```

### å¦‚æœç›´æ¥è¿è¡Œ

```bash
# åœæ­¢å½“å‰è¿›ç¨‹ï¼ˆCtrl+Cï¼‰
# ç„¶åé‡æ–°è¿è¡Œ
npm start
```

## é¢„æœŸè¾“å‡º

æ›´æ–°åï¼Œè¿è¡Œç¨‹åºåº”è¯¥çœ‹åˆ°ï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         PolyBot - é’±åŒ…è·Ÿå•æœºå™¨äºº          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ åˆå§‹åŒ– poly-sdk...
âœ… poly-sdk åˆå§‹åŒ–æˆåŠŸï¼ˆäº¤æ˜“æ¨¡å¼ï¼‰

ğŸš€ åˆå§‹åŒ–é’±åŒ…è·Ÿå•ç³»ç»Ÿ...
âœ… åˆå§‹åŒ–å®Œæˆï¼Œæ­£åœ¨ç›‘å¬ 2 ä¸ªé’±åŒ…

ğŸ“‹ é…ç½®æ£€æŸ¥:
   è‡ªåŠ¨è·Ÿå•: âœ… å·²å¯ç”¨
   ç§é’¥çŠ¶æ€: âœ… å·²é…ç½®
   äº¤æ˜“æœåŠ¡: âœ… å¯ç”¨
   æµ‹è¯•æ¨¡å¼: âœ… æ˜¯

ğŸ¯ ä½¿ç”¨å®Œæ•´çš„è‡ªåŠ¨è·Ÿå•åŠŸèƒ½ï¼ˆSmartMoneyServiceï¼‰...

ğŸ“‹ è‡ªåŠ¨è·Ÿå•é…ç½®:
   è·Ÿå•æ¯”ä¾‹: 10%
   æœ€å¤§å•ç¬”é‡‘é¢: $10
   è®¢å•ç±»å‹: FAK        â† å·²æ”¹ä¸º FAK
   æ»‘ç‚¹å®¹å¿åº¦: 5%       â† å·²è°ƒæ•´ä¸º 5%
   æµ‹è¯•æ¨¡å¼: æ˜¯

âœ… è‡ªåŠ¨è·Ÿå•å·²å¯åŠ¨
   æ­£åœ¨è·Ÿè¸ª: 2 ä¸ªé’±åŒ…
   ğŸ“Š ç›ˆåˆ©ç»Ÿè®¡: å·²å¯ç”¨
```

## äº¤æ˜“å¤±è´¥æ—¶çš„è¾“å‡º

å¦‚æœäº¤æ˜“å¤±è´¥ï¼Œç°åœ¨ä¼šæ˜¾ç¤ºï¼š

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”„ è·Ÿå•äº¤æ˜“: gabagool22
   æ“ä½œ: BUY Up
   ä»·æ ¼: $0.66
   æ•°é‡: 8.42 ä»½é¢
   é‡‘é¢: $5.56
   ç»“æœ: âŒ å¤±è´¥
   é”™è¯¯ä¿¡æ¯: [å…·ä½“é”™è¯¯åŸå› ]
   ğŸ’¡ å»ºè®®: [è§£å†³æ–¹æ¡ˆ]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## å¿«é€Ÿæ›´æ–°å‘½ä»¤ï¼ˆä¸€è¡Œï¼‰

```bash
cd /opt/polybot && git pull origin main && node --check src/ProfitTracker.js && pm2 restart polybot
```

## å¦‚æœæ›´æ–°å¤±è´¥

### é—®é¢˜ï¼šGit Pull å¤±è´¥

```bash
# æ£€æŸ¥ Git çŠ¶æ€
git status

# å¦‚æœæœ‰å†²çª
git stash
git pull origin main
git stash pop
```

### é—®é¢˜ï¼šè¯­æ³•æ£€æŸ¥å¤±è´¥

```bash
# æŸ¥çœ‹å…·ä½“é”™è¯¯
node --check src/ProfitTracker.js 2>&1

# å¦‚æœæ–‡ä»¶æŸåï¼Œä»å¤‡ä»½æ¢å¤
cp config.js.backup.* config.js
```

### é—®é¢˜ï¼šæœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
pm2 logs polybot --err --lines 50

# æˆ–ç›´æ¥è¿è¡ŒæŸ¥çœ‹é”™è¯¯
node index.js
```

## æ•°æ®å¤‡ä»½

æ›´æ–°å‰å»ºè®®å¤‡ä»½ï¼š

```bash
cd /opt/polybot

# å¤‡ä»½é…ç½®æ–‡ä»¶
cp config.js config.js.backup.$(date +%Y%m%d_%H%M%S)

# å¤‡ä»½ç›ˆåˆ©æ•°æ®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
cp data/profit-history.json data/profit-history.json.backup.$(date +%Y%m%d_%H%M%S) 2>/dev/null || true
```

## å›æ»šï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœæ›´æ–°åå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```bash
# æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
ls -lt config.js.backup.*

# æ¢å¤é…ç½®
cp config.js.backup.YYYYMMDD_HHMMSS config.js

# æ¢å¤ä»£ç ï¼ˆå¦‚æœä½¿ç”¨ Gitï¼‰
git checkout HEAD~1 src/WalletFollower.js

# é‡å¯æœåŠ¡
pm2 restart polybot
```

## éªŒè¯æ›´æ–°æˆåŠŸ

æ›´æ–°å¹¶é‡å¯åï¼Œæ£€æŸ¥ï¼š

```bash
# 1. æŸ¥çœ‹æ—¥å¿—ï¼Œç¡®è®¤æ²¡æœ‰é”™è¯¯
pm2 logs polybot --lines 20

# 2. æ£€æŸ¥é…ç½®
node -e "import('./config.js').then(c => { console.log('orderType:', c.default.followSettings?.orderType); console.log('maxSlippage:', c.default.followSettings?.maxSlippage); console.log('profitTracking:', c.default.profitTracking?.enabled); })"

# 3. æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€
pm2 status
```

## å®Œæ•´æ›´æ–°æµç¨‹

```bash
# 1. SSH è¿æ¥
ssh user@your-server-ip

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/polybot

# 3. å¤‡ä»½ï¼ˆå¯é€‰ä½†æ¨èï¼‰
cp config.js config.js.backup.$(date +%Y%m%d_%H%M%S)

# 4. æ›´æ–°ä»£ç 
git pull origin main
# æˆ–æ‰‹åŠ¨ä¸Šä¼ æ–‡ä»¶

# 5. éªŒè¯è¯­æ³•
node --check src/ProfitTracker.js
node --check src/WalletFollower.js

# 6. æ£€æŸ¥é…ç½®
grep "orderType" config.js
grep "profitTracking" config.js

# 7. åˆ›å»ºæ•°æ®ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
mkdir -p data && chmod 755 data

# 8. é‡å¯æœåŠ¡
pm2 restart polybot

# 9. æŸ¥çœ‹æ—¥å¿—
pm2 logs polybot --lines 50
```

---

**æ›´æ–°å®Œæˆåï¼Œç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨æ–°çš„é”™è¯¯å¤„ç†å’Œä¼˜åŒ–é…ç½®ï¼**
