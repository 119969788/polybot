# ğŸ–¥ï¸ è…¾è®¯äº‘æœåŠ¡å™¨åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼

## æ–¹æ³•ä¸€ï¼šä¸€è¡Œå‘½ä»¤å¿«é€Ÿåˆ‡æ¢ï¼ˆæœ€ç®€å•ï¼‰

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /opt/polybot && \
sed -i "s/dryRun: false/dryRun: true/g" config.js && \
sed -i "s/çœŸå®äº¤æ˜“æ¨¡å¼/æµ‹è¯•æ¨¡å¼ï¼ˆå®‰å…¨ï¼‰/g" config.js && \
echo "âœ… å·²åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼" && \
node -e "import('./config.js').then(c => { const cfg = c.default; console.log('éªŒè¯ç»“æœ:'); console.log('  æµ‹è¯•æ¨¡å¼:', cfg.followSettings?.dryRun !== false ? 'âœ… æ˜¯' : 'âŒ å¦'); }).catch(e => console.error('éªŒè¯å¤±è´¥:', e.message));"
```

## æ–¹æ³•äºŒï¼šä½¿ç”¨ sed ç²¾ç¡®æ›¿æ¢ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/polybot

# 2. å¤‡ä»½é…ç½®æ–‡ä»¶
cp config.js config.js.backup.$(date +%Y%m%d_%H%M%S)

# 3. åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼
sed -i "s/dryRun: false,/dryRun: true,  \/\/ âœ… æµ‹è¯•æ¨¡å¼/g" config.js

# 4. éªŒè¯ä¿®æ”¹
grep -A 2 "dryRun" config.js

# 5. éªŒè¯é…ç½®
node -e "import('./config.js').then(c => { const cfg = c.default; console.log('æµ‹è¯•æ¨¡å¼:', cfg.followSettings?.dryRun !== false ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨'); }).catch(e => console.error('éªŒè¯å¤±è´¥:', e.message));"
```

## æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ nano ç¼–è¾‘å™¨æ‰‹åŠ¨ä¿®æ”¹ï¼ˆæœ€å®‰å…¨ï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/polybot

# 2. å¤‡ä»½é…ç½®æ–‡ä»¶
cp config.js config.js.backup

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶
nano config.js
```

åœ¨ç¼–è¾‘å™¨ä¸­æ‰¾åˆ°ï¼š

```javascript
dryRun: false,  // âš ï¸ çœŸå®äº¤æ˜“æ¨¡å¼ - å°†æ‰§è¡ŒçœŸå®äº¤æ˜“
```

æ”¹ä¸ºï¼š

```javascript
dryRun: true,  // âœ… æµ‹è¯•æ¨¡å¼ - ä¸ä¼šæ‰§è¡ŒçœŸå®äº¤æ˜“ï¼Œå®‰å…¨
```

ä¿å­˜ï¼šæŒ‰ `Ctrl+O`ï¼Œå›è½¦ï¼Œç„¶å `Ctrl+X`

## æ–¹æ³•å››ï¼šç›´æ¥æ›¿æ¢æ•´ä¸ªé…ç½®æ®µï¼ˆæœ€å½»åº•ï¼‰

å¦‚æœéœ€è¦ç¡®ä¿é…ç½®æ­£ç¡®ï¼Œå¯ä»¥æ›¿æ¢æ•´ä¸ª `followSettings` éƒ¨åˆ†ï¼š

```bash
cd /opt/polybot && \
cp config.js config.js.backup.$(date +%Y%m%d_%H%M%S) && \
cat > /tmp/followSettings.js << 'EOF'
  followSettings: {
    sizeScale: 0.1,
    maxSizePerTrade: 10,
    minTradeSize: 1,
    maxSlippage: 0.03,
    orderType: 'FOK',
    autoFollow: true,
    dryRun: true,  // âœ… æµ‹è¯•æ¨¡å¼ - ä¸ä¼šæ‰§è¡ŒçœŸå®äº¤æ˜“ï¼Œå®‰å…¨
    watchInterval: 5000,
  },
EOF
# è¿™é‡Œéœ€è¦ä½¿ç”¨æ›´å¤æ‚çš„ sed æˆ– awk æ¥æ›¿æ¢ï¼Œæˆ–è€…ç›´æ¥æ‰‹åŠ¨ç¼–è¾‘
```

## å®Œæ•´éªŒè¯æ­¥éª¤

åˆ‡æ¢åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# 1. æ£€æŸ¥é…ç½®
grep -A 1 "dryRun" config.js

# 2. ä½¿ç”¨ Node.js éªŒè¯
node -e "import('./config.js').then(c => { const cfg = c.default; console.log('é…ç½®éªŒè¯:'); console.log('  æµ‹è¯•æ¨¡å¼ (dryRun):', cfg.followSettings?.dryRun !== false ? 'âœ… æ˜¯' : 'âŒ å¦'); console.log('  è‡ªåŠ¨è·Ÿå•:', cfg.followSettings?.autoFollow ? 'âœ… å·²å¯ç”¨' : 'âŒ å·²ç¦ç”¨'); console.log('  æœ€å¤§å•ç¬”:', '$' + (cfg.followSettings?.maxSizePerTrade || 0)); }).catch(e => console.error('âŒ éªŒè¯å¤±è´¥:', e.message));"

# 3. è¿è¡Œé…ç½®æ£€æŸ¥å·¥å…·ï¼ˆå¦‚æœæœ‰ï¼‰
node test-config.js
```

## é¢„æœŸç»“æœ

ä¿®æ”¹ååº”è¯¥çœ‹åˆ°ï¼š

```
æµ‹è¯•æ¨¡å¼: âœ… æ˜¯
è‡ªåŠ¨è·Ÿå•: âœ… å·²å¯ç”¨
```

## å¿«é€Ÿæ£€æŸ¥è„šæœ¬

åˆ›å»ºä¸€ä¸ªå¿«é€Ÿæ£€æŸ¥è„šæœ¬ `check-dryrun.sh`ï¼š

```bash
cat > check-dryrun.sh << 'EOF'
#!/bin/bash
echo "æ£€æŸ¥æµ‹è¯•æ¨¡å¼é…ç½®..."
if grep -q "dryRun: true" config.js; then
    echo "âœ… æµ‹è¯•æ¨¡å¼å·²å¯ç”¨ (dryRun: true)"
else
    echo "âŒ æµ‹è¯•æ¨¡å¼æœªå¯ç”¨"
    if grep -q "dryRun: false" config.js; then
        echo "   å½“å‰æ˜¯çœŸå®äº¤æ˜“æ¨¡å¼ (dryRun: false)"
        echo "   è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼ï¼š"
        echo "   sed -i 's/dryRun: false/dryRun: true/g' config.js"
    fi
fi
EOF

chmod +x check-dryrun.sh
./check-dryrun.sh
```

## åˆ‡æ¢å›çœŸå®äº¤æ˜“æ¨¡å¼

å¦‚æœéœ€è¦åˆ‡æ¢å›çœŸå®äº¤æ˜“æ¨¡å¼ï¼ˆè°¨æ…æ“ä½œï¼‰ï¼š

```bash
sed -i "s/dryRun: true/dryRun: false/g" config.js
```

## ä½¿ç”¨ PM2 è¿è¡Œæ—¶çš„æ³¨æ„äº‹é¡¹

å¦‚æœä½¿ç”¨ PM2 è¿è¡Œç¨‹åºï¼Œä¿®æ”¹é…ç½®åéœ€è¦é‡å¯ï¼š

```bash
# åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼
sed -i "s/dryRun: false/dryRun: true/g" config.js

# é‡å¯ PM2 è¿›ç¨‹
pm2 restart polybot

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
pm2 logs polybot
```

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šsed å‘½ä»¤ä¸å·¥ä½œ

å¦‚æœ `sed -i` ä¸å·¥ä½œï¼Œå°è¯•ï¼š

```bash
# Linux
sed -i 's/dryRun: false/dryRun: true/g' config.js

# macOS
sed -i '' 's/dryRun: false/dryRun: true/g' config.js
```

### é—®é¢˜ï¼šæ— æ³•æ‰¾åˆ°é…ç½®æ–‡ä»¶

```bash
# æŸ¥æ‰¾é…ç½®æ–‡ä»¶
find / -name "config.js" -type f 2>/dev/null | grep polybot

# æˆ–è€…æŸ¥çœ‹å½“å‰ç›®å½•
pwd
ls -la config.js
```

---

**æ¨èä½¿ç”¨æ–¹æ³•äºŒæˆ–æ–¹æ³•ä¸‰ï¼Œæœ€å®‰å…¨å’Œå¯é ï¼**
