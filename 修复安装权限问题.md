# ğŸ”§ ä¿®å¤å®‰è£…æƒé™é—®é¢˜

## é—®é¢˜æè¿°

é‡åˆ°é”™è¯¯ï¼š
```
E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)
E: Unable to lock directory /var/lib/apt/lists/
E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), are you root?
```

è¿™æ˜¯æƒé™é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ root æƒé™æˆ– sudoã€‚

## å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ sudoï¼ˆæ¨èï¼‰

```bash
# å¦‚æœä½¿ç”¨ curl ä¸‹è½½è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/119969788/polybot/main/install.sh | sudo bash

# å¦‚æœè„šæœ¬å·²ä¸‹è½½
sudo bash install.sh

# å¦‚æœä½¿ç”¨æœ¬åœ°è„šæœ¬
sudo bash é˜¿é‡Œäº‘å®‰è£…polybot.sh
```

### æ–¹æ³•äºŒï¼šåˆ‡æ¢åˆ° root ç”¨æˆ·

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·
sudo su -
# æˆ–
su -

# ç„¶åè¿è¡Œè„šæœ¬
bash install.sh
```

### æ–¹æ³•ä¸‰ï¼šä¸€è¡Œå‘½ä»¤å®‰è£…ï¼ˆä½¿ç”¨ sudoï¼‰

```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo bash - && \
sudo apt install -y nodejs git && \
sudo npm install -g pm2 && \
sudo mkdir -p /opt/polybot && \
cd /opt/polybot && \
sudo git clone https://github.com/119969788/polybot.git . && \
sudo npm install && \
sudo cp config.example.js config.js && \
sudo chown -R $(whoami):$(whoami) /opt/polybot && \
echo "âœ… å®‰è£…å®Œæˆï¼Œè¯·ç¼–è¾‘ config.js é…ç½®é¡¹ç›®"
```

## Node.js ç‰ˆæœ¬æ›´æ–°

âš ï¸ **é‡è¦**: Node.js 18.x å·²ä¸å†ç§¯ææ”¯æŒï¼Œè„šæœ¬å·²æ›´æ–°ä¸ºä½¿ç”¨ **Node.js 20.x LTS**ã€‚

### å¦‚æœå·²å®‰è£… Node.js 18.xï¼Œå‡çº§åˆ° 20.x

```bash
# å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
sudo apt remove nodejs npm

# å®‰è£… Node.js 20.x LTS
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo bash -
sudo apt install -y nodejs

# éªŒè¯ç‰ˆæœ¬
node --version
npm --version
```

## å®Œæ•´ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥å½“å‰ç”¨æˆ·

```bash
whoami
# å¦‚æœæ˜¯ rootï¼Œä¼šæ˜¾ç¤º root
# å¦‚æœæ˜¯æ™®é€šç”¨æˆ·ï¼Œä¼šæ˜¾ç¤ºç”¨æˆ·å
```

### æ­¥éª¤ 2: ä½¿ç”¨ sudo è¿è¡Œå®‰è£…è„šæœ¬

```bash
# æ–¹æ³• A: ä½¿ç”¨ GitHub è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/119969788/polybot/main/install.sh | sudo bash

# æ–¹æ³• B: ä¸‹è½½åè¿è¡Œ
wget https://raw.githubusercontent.com/119969788/polybot/main/install.sh
sudo bash install.sh

# æ–¹æ³• C: ä½¿ç”¨æœ¬åœ°è„šæœ¬
sudo bash é˜¿é‡Œäº‘å®‰è£…polybot.sh
```

### æ­¥éª¤ 3: å¦‚æœ sudo ä¸å¯ç”¨ï¼Œåˆ‡æ¢åˆ° root

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ˆéœ€è¦ root å¯†ç ï¼‰
su -

# æˆ–è€…ä½¿ç”¨ sudo su
sudo su -

# ç„¶åè¿è¡Œè„šæœ¬
bash install.sh
```

## éªŒè¯ä¿®å¤

å®‰è£…å®ŒæˆåéªŒè¯ï¼š

```bash
# 1. æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆåº”è¯¥æ˜¯ v20.x.xï¼‰
node --version

# 2. æ£€æŸ¥ npm ç‰ˆæœ¬
npm --version

# 3. æ£€æŸ¥ PM2
pm2 --version

# 4. æ£€æŸ¥é¡¹ç›®ç›®å½•
ls -l /opt/polybot
```

## æƒé™é—®é¢˜å¸¸è§é”™è¯¯

### é”™è¯¯ 1: Permission denied on apt

**è§£å†³æ–¹æ¡ˆ**:
```bash
sudo apt update
sudo apt install -y nodejs git
```

### é”™è¯¯ 2: Permission denied on npm install -g

**è§£å†³æ–¹æ¡ˆ**:
```bash
sudo npm install -g pm2
```

### é”™è¯¯ 3: Permission denied on /opt/polybot

**è§£å†³æ–¹æ¡ˆ**:
```bash
sudo mkdir -p /opt/polybot
sudo chown -R $(whoami):$(whoami) /opt/polybot
```

## å®‰è£…è„šæœ¬å·²æ›´æ–°

âœ… **å·²ä¿®å¤çš„é—®é¢˜**:

1. âœ… è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ sudoï¼ˆå¦‚æœé root ç”¨æˆ·ï¼‰
2. âœ… æ›´æ–°åˆ° Node.js 20.x LTSï¼ˆæ›¿ä»£å·²å¼ƒç”¨çš„ 18.xï¼‰
3. âœ… æ”¹è¿›æƒé™æ£€æŸ¥
4. âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†

## ä½¿ç”¨æ›´æ–°çš„è„šæœ¬

æœ€æ–°çš„å®‰è£…è„šæœ¬å·²è‡ªåŠ¨å¤„ç†æƒé™é—®é¢˜ï¼Œåªéœ€ä½¿ç”¨ sudoï¼š

```bash
# æ¨èæ–¹å¼ï¼ˆä½¿ç”¨ GitHub è„šæœ¬ï¼‰
curl -fsSL https://raw.githubusercontent.com/119969788/polybot/main/install.sh | sudo bash

# æˆ–è€…æœ¬åœ°è„šæœ¬
sudo bash é˜¿é‡Œäº‘å®‰è£…polybot.sh
```

---

**ç°åœ¨å¯ä»¥ä½¿ç”¨ `sudo bash install.sh` æˆ–åˆ‡æ¢åˆ° root ç”¨æˆ·æ¥è¿è¡Œå®‰è£…è„šæœ¬ï¼**
